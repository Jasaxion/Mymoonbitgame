# Lantern Clash · 花灯争锋

Lantern Clash 是一款以中国传统灯会为舞台的像素格斗游戏，灵感来源于功夫电影与《西游记》传说。玩家可以挑选不同的英雄，在花灯长街上与由 PC 驱动的对手过招，通过掌握节奏与防守来赢取胜利。本仓库基于 MoonBit 语言与 WASM-4 复古主机框架开发，适配 MoonBit 游戏大赛的参赛要求。

## 游戏简介
- **舞台设定**：夜幕下的江南花灯广场，点缀有鸳鸯戏水、摇曳柳树与飘动花灯等像素元素，营造出鲜明的中国风氛围。
- **角色阵容**：
  - **Kung Fu Panda（功夫熊猫）**：竹林守护者，步伐稳重、掌力厚重。
  - **Sun Wukong（齐天大圣）**：来自《西游记》的斗战胜佛，棍法迅捷。
  - **Nezha（哪吒）**：莲花化身，攻防平衡并善用缠斗。
- **玩法核心**：单局对战制，玩家与 PC 对手同场竞技，通过移动、攻击、防守/格挡来消耗对方体力条。胜利条件为击败对手或在时间耗尽时体力更高者获胜。
- **难度选择**：提供「Beginnings / Warrior / Grandmaster」三档难度，对应不同的 AI 进攻节奏、反应速度与格挡概率，让新手和高手都能找到合适挑战。

## 操作说明
- **开始游戏**：在标题画面按下 `Z` 进入角色选择界面。
- **角色选择**：使用方向键左右移动光标，`Z` 确认角色，`X` 返回上一界面。
- **难度选择**：方向键上下切换难度，`Z` 确认，`X` 返回角色选择。
- **战斗操控**：
  - 左右方向键：水平移动。
  - `Z`：发动攻击（连击判定依据角色手脚距离）。
  - `X`：举起护体法器进行格挡，可显著降低伤害并触发受击硬直。
- **战斗结束**：胜负结算后按 `Z` 立即重赛，或按 `X` 返回角色选择重新搭配阵容。

## 技术特色
- **MoonBit + WASM-4**：遵循官方 SDK 接口，使用 MoonBit 语言实现游戏主循环、输入解析、渲染与音画逻辑，编译为 WebAssembly 供浏览器加载。
- **自研状态机**：以整数状态管理标题/选角/难度/战斗/结算流程，并通过 `FightState` 结构记录双方体力、硬直、冷却与动画帧，保证 60FPS 流畅体验。
- **逐帧 AI 对手**：为 PC 设计了基于难度的攻击间隔、移动决策与格挡概率，能够读取玩家攻势与距离自动做出反击，体验类似拳皇时代的 CPU 对手。
- **像素美术程序化绘制**：场景元素（花灯、鸳鸯、柳树、锦地）以及角色造型均通过 Wasm-4 图元实时绘制，无需外部贴图，确保版权自持。
- **多角色差异化**：通过函数配置速度、攻击距离与打击力量，使三位英雄在战斗节奏上形成鲜明差异，玩家需要因敌制胜。

## 团队信息
- **团队名称**：Jade Lantern Studio
- **成员名单**：
  - Alex Chen — 游戏策划 / 程序
  - Lin Zhao — 像素美术 / 关卡布景
  - Rui Wang — 系统设计 / AI 调优
- **联系方式**：jade.lantern.studio@example.com

## 游戏介绍视频链接
- B 站链接（占位）：https://www.bilibili.com/video/BV1xxxxxxLanternClash  （请在提交作品前替换为正式投稿）

## 构建与运行
1. 安装 MoonBit 与 Node.js 环境，执行 `moon update && moon add moonbitlang/wasm4` 完成依赖更新。
2. 编译游戏：`moon build --target wasm`
3. 将生成的 `target/wasm/release/build/lantern-clash.wasm` 复制为 `artifact/game.wasm`
4. 本地体验：`npx wasm4 run target/wasm/release/build/lantern-clash.wasm`
5. 生产包可使用 `npx wasm4 bundle --html artifact/index.html target/wasm/release/build/lantern-clash.wasm`

## 素材与版权说明
- 本项目中的角色立绘、场景元素与音画效果均在代码中程序化绘制；如需扩展额外素材，请确保拥有合法授权并在文档中注明来源。
- 游戏源码以 Apache-2.0 许可发布，欢迎在遵守许可证的前提下二次创作或扩展平台移植。
